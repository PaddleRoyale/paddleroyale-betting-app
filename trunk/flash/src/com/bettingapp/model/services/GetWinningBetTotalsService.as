package com.bettingapp.model.services{	import com.adobe.serialization.json.JSON;	import com.bettingapp.controller.events.BettingAppEvent;	import com.bettingapp.model.managers.WebServicesManager;	import com.bettingapp.vo.WinningBetTotal;	import com.bettingapp.vo.WebServiceResults;		import flash.events.Event;	import flash.net.URLRequest;	import flash.net.URLRequestMethod;		public class GetWinningBetTotalsService extends WebServiceBase	{		public function GetWinningBetTotalsService()		{			super();						// setup parameters exclusive to this command.			_urlRequest.method = URLRequestMethod.GET;			_urlRequest.url = BASE_URL + "betting/GetWinningBetTotals";		}				protected override function onResult($e:Event):void		{			trace(_urlLoader.data);						// Flash 11 commented out as other developers are not on cs6 yet.			//var result:Object = JSON.parse(_urlLoader.data);			var result:Object = com.adobe.serialization.json.JSON.decode(_urlLoader.data);						var betTotals:Array = new Array();						for each (var total:Object in result.WinningBetTotals)			{				var newTotal:WinningBetTotal = new WinningBetTotal();				newTotal.attendee = String(total.name);				newTotal.email = String(total.email);				newTotal.winnings = int(total.winnings);				betTotals.push(newTotal);			}						var event:BettingAppEvent = new BettingAppEvent(BettingAppEvent.WEB_SERVICE_RESULT);			event.parameters.result = WebServiceResults.RESULT_SUCCESS;			event.parameters.totals = betTotals;			_eventManager.dispatchEvent(event);							removeListeners();				// straight override, no calling base class.		}	}}